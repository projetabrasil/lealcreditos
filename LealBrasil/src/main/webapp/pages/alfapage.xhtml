<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<h:outputStylesheet library="css" name="clubefidelidade.css" />
	<h:outputScript library="js" name="pessoas.js" />

	<title>Clube Fidelidade</title>
</h:head>


<h:body style="overflow-x: hidden; overflow-y: hidden "
	styleClass="Bimage">
	<p:growl id="mensagens" autoUpdate="true" redisplay="true" />
	<div style=""></div>

	<h:form>
		<p:panel header="Clube Fidelidade" styleClass="ui-panel-my-titlebar">
		</p:panel>
	</h:form>
	<div id="one">
		<h:form>
			<p:dock position="top">

				<p:menuitem value="Administrativo"
					icon="/resources/images/manager.png"
					actionListener="#{autenticacaojsfController.renderizar(false)}">
				</p:menuitem>
				<p:menuitem value="Auto pontuaÃ§Ã£o"
					icon="/resources/images/auto pontuaÃ§Ã£o.png"
					oncomplete="PF('dialogoPontuar').show();">
				</p:menuitem>
			</p:dock>
		</h:form>
	</div>
	<div>
		<p:dialog widgetVar="dialogoPontuar" closable="false"
			resizable="false" modal="true" appendTo="@(body)" position="60,10">

			<h:form id="formPontuar">
				<p:focus for="identificador2" />

				<h:panelGrid id="painelA" >
					<h:outputLabel value="Auto PontuaÃ§Ã£o - Aguardando AprovaÃ§Ã£o"
						style="color:#{ponto_mov.tipoMovimentacao.cor};font-size:15px;font-weight:900;" />
				</h:panelGrid>

				<h:panelGrid id="painelPontuar" columns="2"
					style="float: left;
    padding: 10px;
    font-family: calibri;
    color: #6495ED;
    font-size: 15px;
    text-align: left; display:block;" styleClass="top-aligned-columns" cellpadding="5"  cellspacing="5">
					<h:panelGrid id="painelEstabelecimento"
						>

						<h:outputLabel value="Estabelecimento"
							style="color:green;font-size:15px;font-weight:900;" />

						<p:selectOneRadio id="perfil2"
							value="#{auto.tipoIdentificadorEstabelecimento}" columns="5"
							converter="omnifaces.SelectItemsConverter">
							<f:selectItems
								value="#{auto.listaTipodeIdentificadoresEstabelecimento}"
								var="c" itemLabel="#{c.descricao}" itemValue="#{c}" />
							<p:ajax event="change" update="identificador2 nomeIdentificador2"
								process="@this"
								oncomplete="$(function(){PrimeFaces.focus('formTemplate:formPontuar:identificador2');});" />
						</p:selectOneRadio>

						<p:outputLabel id="nomeIdentificador2"
							value="#{auto.tipoIdentificadorEstabelecimento.descricao} do Estabelecimento" />

						<p:inputMask id="identificador2" size="24" maxlength="20"
							value="#{auto.estabelecimento.identificador}" required="true"
							requiredMessage="Ã‰ preciso informar a identificaÃ§Ã£o!!!"
							mask="#{auto.tipoIdentificadorEstabelecimento.mask}">
							<p:ajax event="blur" process="@this"
								listener="#{auto.pessoaaverificar('Estabelecimento')}"
								update="pessoa_estabelecimento tipoPontuacao valPontuacao soma valaPontuar
						 	validade" />
						</p:inputMask>
						<c:set var="pessoa_estabelecimento"
							value="#{auto.estabelecimento.fantasia_Apelido}" />
						<p:outputLabel id="pessoa_estabelecimento"
							value="Estab: #{fn:substring(pessoa_estabelecimento,0,20)}"
							style="color:blue;font-size:15px;font-weight:900;" />
						<h:outputLabel value="PontuaÃ§Ã£o" />




						<p:selectOneMenu id="tipoPontuacao" value="#{auto.ponto}"
							converter="omnifaces.SelectItemsConverter"
							rendered="#{!ponto_mov.tipoMovimentacao.visualizadebito}"
							style="width:178px" panelStyle="width:178px">
							<f:selectItems value="#{auto.listaPonto}" var="d"
								itemValue="#{d}" itemLabel="#{d.descricao}" />
							<p:ajax event="change" process="@this"
								listener="#{auto.configPonto_Movimento()}"
								update="valPontuacao soma valaPontuar
						 pessoa_cliente validade"
								oncomplete="$(function(){PrimeFaces.focus('formTemplate:formPontuar:valPontuacao');});" />
						</p:selectOneMenu>




						<p:outputLabel id="valPontuacao"
							value="Valor do Ponto: R$ #{auto.ponto_movimento.valordaUnidade}"
							style="color:blue;font-size:15px;font-weight:900;"
							rendered="#{!auto.tipoMovimentacao.visualizadebito}" />
							<p:outputLabel 
							value="Validade:"
							style="color:#{auto.ponto_movimento.creditaDebita.cor};font-size:15px;font-weight:900;"/>

						<p:outputLabel id="validade"
							value="#{auto.ponto_movimento.validade.time}"
							style="color:#{auto.ponto_movimento.creditaDebita.cor};font-size:15px;font-weight:900;">
							<f:convertDateTime locale="pt_BR" type="both" dateStyle="long"
								pattern="dd/MM/yyyy" />
						</p:outputLabel>
					</h:panelGrid>

					<h:panelGrid id="painelCliente">

						<h:outputLabel value="VocÃª:"
							style="color:red;font-size:15px;font-weight:900;" />



						<p:selectOneRadio id="perfil" size="25"
							value="#{auto.tipoIdentificadorCliente}" columns="5"
							converter="omnifaces.SelectItemsConverter">
							<f:selectItems value="#{auto.listaTipodeIdentificadoresCliente}"
								var="c" itemLabel="#{c.descricao}" itemValue="#{c}" />
							<p:ajax event="change" update="identificador nomeIdentificador"
								process="@this"
								oncomplete="$(function(){PrimeFaces.focus('formTemplate:formPontuar:identificador');});" />
						</p:selectOneRadio>

						<p:outputLabel id="nomeIdentificador"
							value="Informe  seu #{auto.tipoIdentificadorCliente.descricao}" />


						<p:inputMask id="identificador" size="24" maxlength="20"
							value="#{auto.cliente.identificador}" required="true"
							requiredMessage="Ã‰ preciso informar a identificaÃ§Ã£o!!!"
							mask="#{auto.tipoIdentificadorCliente.mask}">
							<p:ajax event="blur" process="@this"
								listener="#{auto.pessoaaverificar('Cliente')}"
								update="pessoa_cliente valPontuacao soma valaPontuar validade formCadastro" />
						</p:inputMask>


						
							
							<c:set var="pessoa_cliente"
							value="#{auto.cliente.descricao}" />
						<p:outputLabel id="pessoa_cliente"
							value="Cliente: #{fn:substring(pessoa_cliente,0,15)}"
							style="color:blue;font-size:15px;font-weight:900;" />




						<p:outputLabel value="Valor do Documento" />
						<p:inputNumber id="valaPontuar" size="24" maxlength="20"
							value="#{auto.ponto_movimento.valoraPontuar}" required="true"
							requiredMessage="Ã‰ preciso informar pontuaÃ§Ã£o!!!">
							<f:validateLongRange minimum="0" />
						</p:inputNumber>
						<p:outputLabel value="N. do Documento" decimalPlaces="0"/>
						<p:inputMask mask="?99999999999999999999999999999999999999999999999999" placeHolder="" id="nDoc" size="24" maxlength="20"
							value="#{auto.ponto_movimento.numDoc}" required="true"
							requiredMessage="Ã‰ preciso informar pontuaÃ§Ã£o!!!">
							<f:validateLongRange minimum="0" />
						</p:inputMask>

						<h:outputLabel id="soma"
							value="Pontos do Cliente: #{auto.pontoSoma} Leal(is) "
							style="color:#0000FF;font-size:15px;font-weight:900;" />

						
						
					</h:panelGrid>
					<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
						<p:commandButton value="Validar"
							actionListener="#{auto.merge()}" process="@form"
							update="formPontuar">
						</p:commandButton>
						<p:commandButton value="Cancelar"
						actionListener="#{auto.merge()}" process="@form"
							oncomplete="PF('dialogoPontuar').hide();">
						</p:commandButton>
					</h:panelGrid>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		
		<p:dialog
			header="Cadastro Ãšnico"
			widgetVar="dialogoCadastro" resizable="false" modal="true"
			closable="false" appendTo="@(body)" position="60,10"
			style="float: left;
    padding: 10px;
    font-family: calibri;
    color: #6495ED;
    font-size: 15px;
    text-align: left;" >
			<h:form id="formCadastro">
			   <p:focus for="nome" />
				<h:panelGrid id="painelCadastro_1">
					<h:panelGrid id="painelCadastro_11">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelNome}"
							rendered="#{auto.pessoaConfig.labelNomeRenderiza}" />
						<p:inputText id="nome" size="67" maxlength="90"
							value="#{auto.cliente.descricao}"
							required="#{auto.pessoaConfig.labelNomeObrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelNomeRequiredMessage}"
							rendered="#{auto.pessoaConfig.labelNomeRenderiza}"
							validatorMessage="O minimo de caracteres para nome sÃ£o  '5'"
							placeholder="MÃ­nimo 5 Letras">
							<f:validateLength minimum="5" />
						</p:inputText>
					</h:panelGrid>
					<h:panelGrid id="painelCadastro_12">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelFantasia}"
							rendered="#{auto.pessoaConfig.labelFantasiaRenderiza}" />
						<p:inputText size="67" maxlength="90"
							value="#{auto.cliente.fantasia_Apelido}"
							required="#{auto.pessoaConfig.labelFantasiaObrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelFantasiaRequiredMessage}"
							rendered="#{auto.pessoaConfig.labelFantasiaRenderiza}"
							validatorMessage="O minimo de caracteres para nome sÃ£o  '5'"
							placeholder="MÃ­nimo 5 Letras">
							<f:validateLength minimum="5" />
						</p:inputText>
					</h:panelGrid>

					<h:panelGrid id="painelCadastro_13">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelSexo}"
							rendered="#{auto.pessoaConfig.labelSexoRenderiza}" />
						<p:selectOneRadio id="perfil"
							value="#{auto.cliente.sexo}"
							 columns="5"
							converter="omnifaces.SelectItemsConverter" rendered="#{auto.pessoaConfig.labelSexoRenderiza}">
							<f:selectItems
								value="#{auto.pessoaConfig.listaSexo}"
								var="c" itemLabel="#{c.abrev}" itemValue="#{c}" />
							<p:ajax event="change" process="@this"
								oncomplete="$(function(){PrimeFaces.focus('formCadastro:calendar');});" />
						</p:selectOneRadio>
					</h:panelGrid>
				</h:panelGrid>

				<h:panelGrid columns="2" id="painelCadastro_2">
					<h:panelGrid id="painelCadastro_21">
						<p:outputLabel value="Data de nascimento"
							rendered="#{auto.pessoaConfig.labelDataNascimentoRenderiza}" />
						<p:calendar id="calendar" size="30" maxlength="15" mask="99/99/9999" 
							value="#{auto.cliente.dataNascimento}"
							required="#{auto.pessoaConfig.labelDataNascimentoObrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelDataNascimentoRequiredMessage}"
							rendered="#{auto.pessoaConfig.labelDataNascimentoRenderiza}">							
							<f:convertDateTime pattern="dd/MM/yyyy" dateStyle="full" type="both"  timezone="GMT+3"/>
						</p:calendar>
					</h:panelGrid>
					<h:panelGrid id="painelCadastro_22">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelcpf_Cnpj}"
							rendered="#{auto.pessoaConfig.labelcpf_CnpjRenderiza}" />
						<p:inputMask  id="identificador" size="30" maxlength="15"
							mask="#{auto.tipoIdentificadorCliente.mask}"
							value="#{auto.cliente.cpf_Cnpj}"
							converter="mascaraTelefoneConverter"
							required="#{auto.pessoaConfig.labelcpf_CnpjObrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelcpf_CnpjRequiredMessage}"
							rendered="#{auto.pessoaConfig.labelcpf_CnpjRenderiza}" readonly="true">
						</p:inputMask>
					</h:panelGrid>




				</h:panelGrid>


				<h:panelGrid columns="2" id="painelCadastro_3">
					<h:panelGrid id="painelCadastro_31">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelrg_Insc}"
							rendered="#{auto.pessoaConfig.labelrg_InscRenderiza}" />
						<p:inputText size="30" maxlength="15"
							value="#{auto.cliente.rg_Insc}"
							required="#{auto.pessoaConfig.labelrg_InscObrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelrg_InscRequiredMessage}"
							rendered="#{auto.pessoaConfig.labelrg_InscRenderiza}">
						</p:inputText>
					</h:panelGrid>

					<h:panelGrid id="painelCadastro_32">
						<p:outputLabel for="fone_1"
							value="#{auto.pessoaConfig.labelfone_1}"
							rendered="#{auto.pessoaConfig.labelfone_1Renderiza}" />
						<p:inputMask mask="#{auto.pessoaConfig.maskTel}"
							id="fone_1" size="30" maxlength="15"
							value="#{auto.cliente.fone_1}"
							required="#{auto.pessoaConfig.labelfone_1Obrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelfone_1RequiredMessage}"
							rendered="#{auto.pessoaConfig.labelfone_1Renderiza}">
						</p:inputMask>
					</h:panelGrid>
				</h:panelGrid>
				<h:panelGrid columns="2" id="painelCadastro_4">
					<h:panelGrid id="painelCadastro_41">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelfone_2}"
							rendered="#{auto.pessoaConfig.labelfone_2Renderiza}" />
						<p:inputMask mask="#{auto.pessoaConfig.maskTel}"
							size="30" maxlength="15"
							value="#{auto.cliente.fone_2}"
							required="#{auto.pessoaConfig.labelfone_2Obrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelfone_2RequiredMessage}"
							rendered="#{auto.pessoaConfig.labelfone_2Renderiza}">
						</p:inputMask>
					</h:panelGrid>
					<h:panelGrid id="painelCadastro_42">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelfone_3}" />
						<p:inputMask mask="#{auto.pessoaConfig.maskTel}"
							size="30" maxlength="15"
							value="#{auto.cliente.fone_3}"
							required="#{auto.pessoaConfig.labelfone_3Obrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelfone_3RequiredMessage}"
							rendered="#{auto.pessoaConfig.labelfone_3Renderiza}">
						</p:inputMask>
					</h:panelGrid>

				</h:panelGrid>
				<h:panelGrid columns="2" id="painelCadastro_5">
					<h:panelGrid id="painelCadastro_51">
						<p:outputLabel
							value="#{auto.pessoaConfig.labelemail}"
							rendered="#{auto.pessoaConfig.labelemailRenderiza}" />
						<p:inputText size="67" maxlength="90"
							value="#{auto.cliente.email}"
							required="#{auto.pessoaConfig.labelemailObrigatorio}"
							requiredMessage="#{auto.pessoaConfig.labelemailRequiredMessage}"
							rendered="#{auto.pessoaConfig.labelemailRenderiza}">
						</p:inputText>
					</h:panelGrid>
				</h:panelGrid>

				<h:panelGrid columns="2" id="painelCadastro_6"
					rendered="#{auto.perfilLogado.paginaAtual.renderizaCadastrodeUsuarios}">
					<h:panelGrid id="painelCadastro_61">
						<p:outputLabel value="Informe a Senha" />
						<p:password size="30" maxlength="8"
							value="#{auto.usAuto.senhaSemCript}"
							required="true" requiredMessage="Informe a senha!!!"
							validatorMessage="O minimo de digitos para senha: '8'"
							placeholder="8 letras e/ou digitos">
							<f:validateLength minimum="8" />
						</p:password>
					</h:panelGrid>
					<h:panelGrid id="painelCadastro_62">
						<p:outputLabel value="Confirme a Senha" />
						<p:password size="30" maxlength="8"
							value="#{auto.usAuto.confSenha}" required="true"
							requiredMessage="Informe a confirmaÃ§Ã£o de senha!!!"
							validatorMessage="O minimo de digitos para confirmaÃ§Ã£o senha: '8'"
							placeholder="8 letras e/ou digitos">
							<f:validateLength minimum="8" />
						</p:password>
					</h:panelGrid>
				</h:panelGrid>

				<h:panelGrid columns="2" id="painelCadastro_7">
					<p:panelGrid>
						<p:commandButton value="Salvar" process="@form"
							actionListener="#{auto.mergePessoa}"
							update=":mensagens :formPontuar" />
					</p:panelGrid>
					<p:panelGrid>
						<p:commandButton value="Cancelar" process="@this"
						actionListener="#{auto.cancelar}" />
					</p:panelGrid>
				</h:panelGrid>
			</h:form>
		</p:dialog>
	</div>
</h:body>

</html>